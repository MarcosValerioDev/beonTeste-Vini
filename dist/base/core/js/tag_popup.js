(()=>{var e={273:(e,t,o)=>{var n=o(118),i=o(754),s=i;s.v1=n,s.v4=i,e.exports=s},122:e=>{for(var t=[],o=0;o<256;++o)t[o]=(o+256).toString(16).substr(1);e.exports=function(e,o){var n=o||0,i=t;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},287:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var o=new Uint8Array(16);e.exports=function(){return t(o),o}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},118:(e,t,o)=>{var n,i,s=o(287),r=o(122),a=0,p=0;e.exports=function(e,t,o){var c=t&&o||0,l=t||[],d=(e=e||{}).node||n,u=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==u){var h=s();null==d&&(d=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==u&&(u=i=16383&(h[6]<<8|h[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:p+1,g=m-a+(v-p)/1e4;if(g<0&&void 0===e.clockseq&&(u=u+1&16383),(g<0||m>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=m,p=v,i=u;var y=(1e4*(268435455&(m+=122192928e5))+v)%4294967296;l[c++]=y>>>24&255,l[c++]=y>>>16&255,l[c++]=y>>>8&255,l[c++]=255&y;var b=m/4294967296*1e4&268435455;l[c++]=b>>>8&255,l[c++]=255&b,l[c++]=b>>>24&15|16,l[c++]=b>>>16&255,l[c++]=u>>>8|128,l[c++]=255&u;for(var f=0;f<6;++f)l[c+f]=d[f];return t||r(l)}},754:(e,t,o)=>{var n=o(287),i=o(122);e.exports=function(e,t,o){var s=t&&o||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||n)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var a=0;a<16;++a)t[s+a]=r[a];return t||i(r)}}},t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=o(273),t=o.n(e);const n="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTIgNTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUyIDUyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiPjxnPjxnPgoJPHBhdGggZD0iTTI2LDBDMTEuNjY0LDAsMCwxMS42NjMsMCwyNnMxMS42NjQsMjYsMjYsMjZzMjYtMTEuNjYzLDI2LTI2UzQwLjMzNiwwLDI2LDB6IE0yNiw1MEMxMi43NjcsNTAsMiwzOS4yMzMsMiwyNiAgIFMxMi43NjcsMiwyNiwyczI0LDEwLjc2NywyNCwyNFMzOS4yMzMsNTAsMjYsNTB6IiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiNGRkZGRkYiIGRhdGEtb2xkX2NvbG9yPSIjMDAwMDAwIj48L3BhdGg+Cgk8cGF0aCBkPSJNMzguMjUyLDE1LjMzNmwtMTUuMzY5LDE3LjI5bC05LjI1OS03LjQwN2MtMC40My0wLjM0NS0xLjA2MS0wLjI3NC0xLjQwNSwwLjE1NmMtMC4zNDUsMC40MzItMC4yNzUsMS4wNjEsMC4xNTYsMS40MDYgICBsMTAsOEMyMi41NTksMzQuOTI4LDIyLjc4LDM1LDIzLDM1YzAuMjc2LDAsMC41NTEtMC4xMTQsMC43NDgtMC4zMzZsMTYtMThjMC4zNjctMC40MTIsMC4zMy0xLjA0NS0wLjA4My0xLjQxMSAgIEMzOS4yNTEsMTQuODg1LDM4LjYyLDE0LjkyMiwzOC4yNTIsMTUuMzM2eiIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBzdHlsZT0iZmlsbDojRkZGRkZGIiBkYXRhLW9sZF9jb2xvcj0iIzAwMDAwMCI+PC9wYXRoPgo8L2c+PC9nPiA8L3N2Zz4=";var i=function(e,t){return this.root=e,this.config=Object.assign({id:null,allowChange:!0,reloadContent:!0,initialState:0,messages:{title:"Encontre ofertas exclusivas!",loading:"Carregando ofertas personalizadas…",success:"Pronto! Aproveite uma experiência única.",error:"Ops, não conseguimos atualizar suas preferências.",triggerLabel:"Encontre ofertas exclusivas",invalidInput:"Selecione as opções para entendermos suas preferências!",invalidOption:"Não reconheccemos essa opção."},options:[]},t),this.init(),this};i.prototype.init=function(){this.root.className=this.root.className+" initialized",this.render(),this.initialState()},i.prototype.initialState=function(){"done"!==this.getControlCookie()?this.changeState(this.config.initialState):this.config.allowChange?this.changeStep(0):this.hideComponent()},i.prototype.render=function(){const e=document.createElement("div");e.className="beon_popover";const t=document.createElement("div");t.className="wrap_popover",t.id="beon_wrap_popover";const o=document.createElement("div");o.className="beon_popover_step beon_popover_step--0",o.appendChild(this.buildTitleTrigger()),t.appendChild(o);const n=document.createElement("div");n.className="beon_popover_step beon_popover_step--1",n.appendChild(this.buildHead()),this.config.options.sort(((e,t)=>e.order-t.order)).forEach((e=>n.appendChild(this.buildOption(e)))),n.appendChild(this.buildFormControls()),n.appendChild(this.buildPopupControls()),t.appendChild(n);const i=document.createElement("div");i.className="beon_popover_step beon_popover_step--2",this.buildLoadingFeedback().forEach((e=>i.appendChild(e))),t.appendChild(i);const s=document.createElement("div");s.className="beon_popover_step beon_popover_step--3",s.appendChild(this.buildSuccessFeedback()),s.appendChild(this.buildErrorFeedback()),t.appendChild(s),e.appendChild(t),e.appendChild(this.buildBulletTrigger()),this.root.appendChild(e),this.changeStep(0)},i.prototype.buildTitleTrigger=function(){const e=document.createElement("div");e.id="beon_popover_step_0",e.style.display="flex",e.style.flexDirection="column",e.style.margin="auto",e.style.cursor="pointer",e.addEventListener("click",(()=>this.changeStep(1)));const t=document.createElement("div");return t.id="beon_popover_icon",t.className="popover_icon popover_icon--up",e.appendChild(this.buildHead()),e.appendChild(t),e},i.prototype.buildBulletTrigger=function(){const e=document.createElement("div");return e.className="bubble_button animated fadeIn",e.innerHTML="<span class='bubble_button__icon'></span><span class='bubble_button__label'>"+this.config.messages.triggerLabel+"</span>",e.addEventListener("click",(()=>{"flex"===this.root.querySelector("#beon_wrap_popover").style.display?this.changeStep(0):this.changeStep(1)})),e},i.prototype.buildHead=function(){const e=document.createElement("span");return e.className="beon_popover-head",e.innerText=this.config.messages.title,e},i.prototype.buildOption=function(e){const t=document.createElement("div");t.style.display="flex",t.style.flexDirection="column";const o=document.createElement("div");o.className="wrap_select";const n=document.createElement("input");n.placeholder=e.label,n.className="popover_select",n.name=e.tree,n.setAttribute("list",`${e.tree}_list`),n.addEventListener("change",function(e){const{target:t}=e,o=t.value,n=t.getAttribute("list"),i=new RegExp(`${o}`,"i"),s=document.querySelectorAll(`#${n} option`);let r;for(let e=0,t=s.length;e<t;e++){const t=s[e],o=t.value;if(i.test(o)){r=t.getAttribute("data-option");break}}r?t.setAttribute("data-selected",r):this.reportError(this.config.messages.invalidOption)}.bind(this));const i=document.createElement("datalist");i.id=n.getAttribute("list");for(const t of e.options){const e=document.createElement("option");e.value=t[1],e.setAttribute("data-option",t),i.appendChild(e)}return o.appendChild(n),o.appendChild(i),o},i.prototype.buildFormControls=function(){const e=document.createElement("button");return e.className="popover_search_button",e.innerText="OK",e.addEventListener("click",this.handleSubmit.bind(this)),e},i.prototype.buildPopupControls=function(){const e=document.createElement("button");return e.className="popover_close_button",e.innerText="FECHAR",e.addEventListener("click",(()=>this.changeStep(0))),e},i.prototype.buildLoadingFeedback=function(){const e=document.createElement("div");e.className="lds-roller",e.innerHTML="<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>";const t=document.createElement("span");return t.className="animated fadeIn",t.style.margin="0px auto 20px auto",t.innerText=this.config.messages.loading,[e,t]},i.prototype.buildSuccessFeedback=function(){const e=document.createElement("div");e.className="on--success";const t=document.createElement("img");t.className="animated tada",t.style.height="64px",t.style.margin="20px auto",t.src=n;const o=document.createElement("span");return o.className="animated fadeIn",o.style.margin=" 0px auto 20px auto",o.innerText=this.config.messages.success,e.appendChild(t),e.appendChild(o),e},i.prototype.buildErrorFeedback=function(){const e=document.createElement("div");e.className="on--error";const t=document.createElement("img");t.className="animated tada",t.style.height="64px",t.style.margin="20px auto",t.src=n;const o=document.createElement("span");return o.className="animated fadeIn",o.style.margin=" 0px auto 20px auto",o.innerText=this.config.messages.error,e.appendChild(t),e.appendChild(o),e},i.prototype.changeStep=function(e){const t=this.root.querySelector("#beon_wrap_popover");0===e&&this.reset(),3===e?t.className="wrap_popover animated slideOutDown":this.root.querySelector("#beon_wrap_popover").className="wrap_popover",this.root.querySelector(".beon_popover_step--0").style.display="none",this.root.querySelector(".beon_popover_step--1").style.display="none",this.root.querySelector(".beon_popover_step--2").style.display="none",this.root.querySelector(".beon_popover_step--3").style.display="none",this.root.querySelector(`.beon_popover_step--${e}`).style.display="flex",t.className=t.className.replace(/(step--[0-9])/i,""),t.className=t.className+" step--"+e},i.prototype.hideComponent=function(){this.root.style.display="none"},i.prototype.changeState=function(e){let t=this.root.querySelector("#beon_wrap_popover").className;t=t.replace(/(state--.+?)/i,""),e&&(t+=` state--${e}`),this.root.querySelector("#beon_wrap_popover").className=t},i.prototype.handleSubmit=function(){let e=[];if(this.root.querySelectorAll("input[list]").forEach((t=>e.push(t.getAttribute("data-selected").split(",")[0]))),e=e.filter((e=>e.length)),!e.length)return void this.reportError(this.config.messages.invalidInput);this.changeStep(2);let o="homepage",n={};window.beon_custom&&(o=window.beon_custom.currentPage(),n=window.beon_custom.parser.parse(o));const i={event_id:t().v4(),timestamp:Date.now(),type:"ack",payload:Object.assign({payloadType:"user_tags",pageType:o,tags:[]},n)};e.forEach((e=>i.payload.tags.push({type:"tree",label:e}))),window.beon?(document.addEventListener("beon.engine.send.response",function(e){var t=e.detail.what,o=e.detail.payload;"event"===t&&o.event_id===i.event_id&&this.handleResponse(e)}.bind(this)),beon("send","event",i)):setTimeout((()=>this.handleResponse(!0)),2e3)},i.prototype.handleResponse=function(e){this.changeStep(3),e?this.changeState("success"):this.changeState("error"),this.setControlCookie(),window.setTimeout((()=>this.changeStep(0)),6e3)},i.prototype.reset=function(){this.root.querySelectorAll("input[list]").forEach((e=>e.value="")),this.root.querySelector("#beon_wrap_popover").className="wrap_popover",this.changeState(null)},i.prototype.reportError=function(e){const t=this.root.querySelector(".popover_search_button");t.innerText=e,t.className=t.className+" has-error",setTimeout((()=>{t.innerText="OK",t.className=t.className.replace(" has-error","")}),3e3)},i.prototype.setControlCookie=function(){var e;return e=`beon-control-${this.config.id}=done; domain=`+window.location.hostname+"; path=/",document.cookie=e,"done"},i.prototype.getControlCookie=function(){const e=`beon-control-${this.config.id}`;for(var t=document.cookie.split(";"),o=null,n=0;n<t.length;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e)){o=i.substring(e.length+1,i.length);break}}return o};const s=i;var r=function(){this.initPopups(),this.bindEvents()};r.prototype.bindEvents=function(){document.addEventListener("DOMContentLoaded",this.initPopups.bind(this)),document.addEventListener("beon.buddy.elements.handle.item.inject.success",this.initPopupFromInjection.bind(this)),document.addEventListener("beon.buddy.inject.after",this.initPopupFromInjection.bind(this))},r.prototype.initPopups=function(){var e=document.querySelectorAll(".beon-tagpopup:not(.initialized)");Array.prototype.slice.call(e).forEach(function(e,t){this.initPopup(e)}.bind(this))},r.prototype.initPopupFromInjection=function(e){var t=e.detail.container.querySelector(".beon-tagpopup:not(.initialized)");t&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){this.initPopup(t)}.bind(this)):this.initPopup(t))},r.prototype.initPopup=function(e){try{var t=e.getAttribute("data-config"),o=JSON.parse(t);new s(e,o)}catch(e){console.log("failed to build tagpopup",e)}},window&&(window.BeonTagPopupInitializer=r)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibi50ZW5hbnQuY3VzdG9tLmJhc2UvLi9zcmMvYmFzZS9ub2RlX21vZHVsZXMvdXVpZC9pbmRleC5qcyIsIndlYnBhY2s6Ly9ibi50ZW5hbnQuY3VzdG9tLmJhc2UvLi9zcmMvYmFzZS9ub2RlX21vZHVsZXMvdXVpZC9saWIvYnl0ZXNUb1V1aWQuanMiLCJ3ZWJwYWNrOi8vYm4udGVuYW50LmN1c3RvbS5iYXNlLy4vc3JjL2Jhc2Uvbm9kZV9tb2R1bGVzL3V1aWQvbGliL3JuZy1icm93c2VyLmpzIiwid2VicGFjazovL2JuLnRlbmFudC5jdXN0b20uYmFzZS8uL3NyYy9iYXNlL25vZGVfbW9kdWxlcy91dWlkL3YxLmpzIiwid2VicGFjazovL2JuLnRlbmFudC5jdXN0b20uYmFzZS8uL3NyYy9iYXNlL25vZGVfbW9kdWxlcy91dWlkL3Y0LmpzIiwid2VicGFjazovL2JuLnRlbmFudC5jdXN0b20uYmFzZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ibi50ZW5hbnQuY3VzdG9tLmJhc2Uvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vYm4udGVuYW50LmN1c3RvbS5iYXNlL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9ibi50ZW5hbnQuY3VzdG9tLmJhc2Uvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9ibi50ZW5hbnQuY3VzdG9tLmJhc2UvLi9zcmMvYmFzZS9zcmMvanMvdGFnX3BvcHVwL3BvcHVwLmpzIiwid2VicGFjazovL2JuLnRlbmFudC5jdXN0b20uYmFzZS8uL3NyYy9iYXNlL3NyYy9qcy90YWdfcG9wdXAvaW5pdC5qcyJdLCJuYW1lcyI6WyJ2MSIsInY0IiwidXVpZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJieXRlVG9IZXgiLCJpIiwidG9TdHJpbmciLCJzdWJzdHIiLCJidWYiLCJvZmZzZXQiLCJidGgiLCJqb2luIiwiZ2V0UmFuZG9tVmFsdWVzIiwiY3J5cHRvIiwiYmluZCIsIndpbmRvdyIsIm1zQ3J5cHRvIiwicm5kczgiLCJVaW50OEFycmF5Iiwicm5kcyIsIkFycmF5IiwiciIsIk1hdGgiLCJyYW5kb20iLCJfbm9kZUlkIiwiX2Nsb2Nrc2VxIiwicm5nIiwiYnl0ZXNUb1V1aWQiLCJfbGFzdE1TZWNzIiwiX2xhc3ROU2VjcyIsIm9wdGlvbnMiLCJiIiwibm9kZSIsImNsb2Nrc2VxIiwidW5kZWZpbmVkIiwic2VlZEJ5dGVzIiwibXNlY3MiLCJEYXRlIiwiZ2V0VGltZSIsIm5zZWNzIiwiZHQiLCJFcnJvciIsInRsIiwidG1oIiwibiIsImlpIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImJlb25fcG9wb3J2ZXJfY2hlY2siLCJUYWdQb3B1cENvbXBvbmVudCIsInJvb3QiLCJjb25maWciLCJ0aGlzIiwiYXNzaWduIiwiaWQiLCJhbGxvd0NoYW5nZSIsInJlbG9hZENvbnRlbnQiLCJpbml0aWFsU3RhdGUiLCJtZXNzYWdlcyIsInRpdGxlIiwibG9hZGluZyIsInN1Y2Nlc3MiLCJlcnJvciIsInRyaWdnZXJMYWJlbCIsImludmFsaWRJbnB1dCIsImludmFsaWRPcHRpb24iLCJpbml0IiwiY2xhc3NOYW1lIiwicmVuZGVyIiwiZ2V0Q29udHJvbENvb2tpZSIsImNoYW5nZVN0YXRlIiwiY2hhbmdlU3RlcCIsImhpZGVDb21wb25lbnQiLCJiZW9uX3BvcG92ZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ3cmFwX3BvcG92ZXIiLCJzdGVwMCIsImFwcGVuZENoaWxkIiwiYnVpbGRUaXRsZVRyaWdnZXIiLCJzdGVwMSIsImJ1aWxkSGVhZCIsInNvcnQiLCJvcmRlciIsImZvckVhY2giLCJvcHRpb24iLCJidWlsZE9wdGlvbiIsImJ1aWxkRm9ybUNvbnRyb2xzIiwiYnVpbGRQb3B1cENvbnRyb2xzIiwic3RlcDIiLCJidWlsZExvYWRpbmdGZWVkYmFjayIsImVsZW1lbnQiLCJzdGVwMyIsImJ1aWxkU3VjY2Vzc0ZlZWRiYWNrIiwiYnVpbGRFcnJvckZlZWRiYWNrIiwiYnVpbGRCdWxsZXRUcmlnZ2VyIiwiZGl2MCIsInN0eWxlIiwiZGlzcGxheSIsImZsZXhEaXJlY3Rpb24iLCJtYXJnaW4iLCJjdXJzb3IiLCJhZGRFdmVudExpc3RlbmVyIiwicG9wb3Zlcl9pY29uIiwiYmVvbl9wb3BvdmVyX2J1dHRvbiIsImlubmVySFRNTCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0MCIsImlubmVyVGV4dCIsImRpdlNlbGVjdCIsIndyYXBfc2VsZWN0IiwiaW5wdXQiLCJwbGFjZWhvbGRlciIsImxhYmVsIiwibmFtZSIsInRyZWUiLCJzZXRBdHRyaWJ1dGUiLCJldmVudCIsInRhcmdldCIsInZhbHVlIiwiZ2V0QXR0cmlidXRlIiwidGV4dFJlZ2V4cCIsIlJlZ0V4cCIsImRhdGFsaXN0T3B0aW9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZWxlY3RlZCIsImMiLCJsZW5ndGgiLCJ0ZXN0IiwicmVwb3J0RXJyb3IiLCJkYXRhbGlzdCIsIm9wdCIsIm9wdGlvbkVsIiwiYnV0dG9uT2siLCJoYW5kbGVTdWJtaXQiLCJidXR0b25GZWNoYXIiLCJsb2FkaW5nR2lmIiwidGV4dExvYWRpbmciLCJmZWVkYmFjayIsImltYWdlQ2hlY2siLCJoZWlnaHQiLCJzcmMiLCJ0ZXh0UHJvbnRvIiwic3RlcCIsInBvcG92ZXIiLCJyZXNldCIsInJlcGxhY2UiLCJzdGF0ZSIsInZhbHVlcyIsInNlbGVjdCIsInB1c2giLCJzcGxpdCIsImZpbHRlciIsImN1cnJlbnRQYWdlIiwicGFyc2VkIiwiYmVvbl9jdXN0b20iLCJwYXJzZXIiLCJwYXJzZSIsImFja0V2ZW50IiwiZXZlbnRfaWQiLCJ0aW1lc3RhbXAiLCJub3ciLCJ0eXBlIiwicGF5bG9hZCIsInBheWxvYWRUeXBlIiwicGFnZVR5cGUiLCJ0YWdzIiwiYmVvbiIsIndoYXQiLCJkZXRhaWwiLCJoYW5kbGVSZXNwb25zZSIsInNldFRpbWVvdXQiLCJzZXRDb250cm9sQ29va2llIiwibWVzc2FnZSIsImJ1dHRvbiIsImNvb2tpZSIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJjb29raWVOYW1lIiwiY29va2llcyIsImNoYXJBdCIsInN1YnN0cmluZyIsImluZGV4T2YiLCJUYWdQb3B1cEluaXRpYWxpemVyIiwiaW5pdFBvcHVwcyIsImJpbmRFdmVudHMiLCJpbml0UG9wdXBGcm9tSW5qZWN0aW9uIiwicG9wdXBzIiwic2xpY2UiLCJpbmRleCIsImluaXRQb3B1cCIsImNvbnRhaW5lciIsInJlYWR5U3RhdGUiLCJyYXdDb25maWciLCJKU09OIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJCZW9uVGFnUG9wdXBJbml0aWFsaXplciJdLCJtYXBwaW5ncyI6IjJCQUFBLElBQUlBLEVBQUssRUFBUSxLQUNiQyxFQUFLLEVBQVEsS0FFYkMsRUFBT0QsRUFDWEMsRUFBS0YsR0FBS0EsRUFDVkUsRUFBS0QsR0FBS0EsRUFFVkUsRUFBT0MsUUFBVUYsRyxRQ0ZqQixJQURBLElBQUlHLEVBQVksR0FDUEMsRUFBSSxFQUFHQSxFQUFJLE1BQU9BLEVBQ3pCRCxFQUFVQyxJQUFNQSxFQUFJLEtBQU9DLFNBQVMsSUFBSUMsT0FBTyxHQWlCakRMLEVBQU9DLFFBZFAsU0FBcUJLLEVBQUtDLEdBQ3hCLElBQUlKLEVBQUlJLEdBQVUsRUFDZEMsRUFBTU4sRUFFVixNQUFPLENBQUVNLEVBQUlGLEVBQUlILE1BQU9LLEVBQUlGLEVBQUlILE1BQ2pDSyxFQUFJRixFQUFJSCxNQUFPSyxFQUFJRixFQUFJSCxNQUFPLElB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b0ksYUFHTHBJLEtBQUtxSSxjQUtQRixFQUFvQjFJLFVBQVU0SSxXQUFhLFdBQ3pDL0csU0FBUzRCLGlCQUFpQixtQkFBb0JsRCxLQUFLb0ksV0FBVzVMLEtBQUt3RCxPQUNuRXNCLFNBQVM0QixpQkFDUCxpREFDQWxELEtBQUtzSSx1QkFBdUI5TCxLQUFLd0QsT0FFbkNzQixTQUFTNEIsaUJBQ1AsMEJBQ0FsRCxLQUFLc0ksdUJBQXVCOUwsS0FBS3dELFFBSXJDbUksRUFBb0IxSSxVQUFVMkksV0FBYSxXQUN6QyxJQUFJRyxFQUFTakgsU0FBU2tELGlCQUFpQixvQ0FFdkMxSCxNQUFNMkMsVUFBVStJLE1BQU03SSxLQUFLNEksR0FBUXZHLFFBQ2pDLFNBQVNsQyxFQUFNMkksR0FDYnpJLEtBQUswSSxVQUFVNUksSUFDZnRELEtBQUt3RCxRQUlYbUksRUFBb0IxSSxVQUFVNkksdUJBQXlCLFNBQVNyRSxHQUM5RCxJQUNJbkUsRUFEWW1FLEVBQU1vRCxPQUFPc0IsVUFDUnJGLGNBQWMsb0NBRS9CeEQsSUFDMEIsWUFBeEJ3QixTQUFTc0gsV0FDWHRILFNBQVM0QixpQkFDUCxtQkFDQSxXQUNFbEQsS0FBSzBJLFVBQVU1SSxJQUNmdEQsS0FBS3dELE9BR1RBLEtBQUswSSxVQUFVNUksS0FLckJxSSxFQUFvQjFJLFVBQVVpSixVQUFZLFNBQVM1SSxHQUNqRCxJQUNFLElBQUkrSSxFQUFZL0ksRUFBS3NFLGFBQWEsZUFDOUJyRSxFQUFTK0ksS0FBS3JDLE1BQU1vQyxHQUV4QixJQUFJLEVBQWtCL0ksRUFBTUMsR0FDNUIsTUFBT2dKLEdBQ1BDLFFBQVFDLElBQUksMkJBQTRCRixLQUt0Q3RNLFNBQVFBLE9BQU95TSx3QkFBMEJmLEkiLCJmaWxlIjoiYmFzZS9jb3JlL2pzL3RhZ19wb3B1cC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciB2MSA9IHJlcXVpcmUoJy4vdjEnKTtcbnZhciB2NCA9IHJlcXVpcmUoJy4vdjQnKTtcblxudmFyIHV1aWQgPSB2NDtcbnV1aWQudjEgPSB2MTtcbnV1aWQudjQgPSB2NDtcblxubW9kdWxlLmV4cG9ydHMgPSB1dWlkO1xuIiwiLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleFtpXSA9IChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSk7XG59XG5cbmZ1bmN0aW9uIGJ5dGVzVG9VdWlkKGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gb2Zmc2V0IHx8IDA7XG4gIHZhciBidGggPSBieXRlVG9IZXg7XG4gIC8vIGpvaW4gdXNlZCB0byBmaXggbWVtb3J5IGlzc3VlIGNhdXNlZCBieSBjb25jYXRlbmF0aW9uOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMTc1I2M0XG4gIHJldHVybiAoW2J0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sIFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV1dKS5qb2luKCcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBieXRlc1RvVXVpZDtcbiIsIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuICBJbiB0aGVcbi8vIGJyb3dzZXIgdGhpcyBpcyBhIGxpdHRsZSBjb21wbGljYXRlZCBkdWUgdG8gdW5rbm93biBxdWFsaXR5IG9mIE1hdGgucmFuZG9tKClcbi8vIGFuZCBpbmNvbnNpc3RlbnQgc3VwcG9ydCBmb3IgdGhlIGBjcnlwdG9gIEFQSS4gIFdlIGRvIHRoZSBiZXN0IHdlIGNhbiB2aWFcbi8vIGZlYXR1cmUtZGV0ZWN0aW9uXG5cbi8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0b1xuLy8gaW1wbGVtZW50YXRpb24uIEFsc28sIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byBvbiBJRTExLlxudmFyIGdldFJhbmRvbVZhbHVlcyA9ICh0eXBlb2YoY3J5cHRvKSAhPSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YobXNDcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pKTtcblxuaWYgKGdldFJhbmRvbVZhbHVlcykge1xuICAvLyBXSEFUV0cgY3J5cHRvIFJORyAtIGh0dHA6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9DcnlwdG9cbiAgdmFyIHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB3aGF0d2dSTkcoKSB7XG4gICAgZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbiAgICByZXR1cm4gcm5kczg7XG4gIH07XG59IGVsc2Uge1xuICAvLyBNYXRoLnJhbmRvbSgpLWJhc2VkIChSTkcpXG4gIC8vXG4gIC8vIElmIGFsbCBlbHNlIGZhaWxzLCB1c2UgTWF0aC5yYW5kb20oKS4gIEl0J3MgZmFzdCwgYnV0IGlzIG9mIHVuc3BlY2lmaWVkXG4gIC8vIHF1YWxpdHkuXG4gIHZhciBybmRzID0gbmV3IEFycmF5KDE2KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1hdGhSTkcoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIHI7IGkgPCAxNjsgaSsrKSB7XG4gICAgICBpZiAoKGkgJiAweDAzKSA9PT0gMCkgciA9IE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDAwMDtcbiAgICAgIHJuZHNbaV0gPSByID4+PiAoKGkgJiAweDAzKSA8PCAzKSAmIDB4ZmY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJuZHM7XG4gIH07XG59XG4iLCJ2YXIgcm5nID0gcmVxdWlyZSgnLi9saWIvcm5nJyk7XG52YXIgYnl0ZXNUb1V1aWQgPSByZXF1aXJlKCcuL2xpYi9ieXRlc1RvVXVpZCcpO1xuXG4vLyAqKmB2MSgpYCAtIEdlbmVyYXRlIHRpbWUtYmFzZWQgVVVJRCoqXG4vL1xuLy8gSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL0xpb3NLL1VVSUQuanNcbi8vIGFuZCBodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvdXVpZC5odG1sXG5cbnZhciBfbm9kZUlkO1xudmFyIF9jbG9ja3NlcTtcblxuLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG52YXIgX2xhc3RNU2VjcyA9IDA7XG52YXIgX2xhc3ROU2VjcyA9IDA7XG5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYnJvb2ZhL25vZGUtdXVpZCBmb3IgQVBJIGRldGFpbHNcbmZ1bmN0aW9uIHYxKG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuICB2YXIgYiA9IGJ1ZiB8fCBbXTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIG5vZGUgPSBvcHRpb25zLm5vZGUgfHwgX25vZGVJZDtcbiAgdmFyIGNsb2Nrc2VxID0gb3B0aW9ucy5jbG9ja3NlcSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbG9ja3NlcSA6IF9jbG9ja3NlcTtcblxuICAvLyBub2RlIGFuZCBjbG9ja3NlcSBuZWVkIHRvIGJlIGluaXRpYWxpemVkIHRvIHJhbmRvbSB2YWx1ZXMgaWYgdGhleSdyZSBub3RcbiAgLy8gc3BlY2lmaWVkLiAgV2UgZG8gdGhpcyBsYXppbHkgdG8gbWluaW1pemUgaXNzdWVzIHJlbGF0ZWQgdG8gaW5zdWZmaWNpZW50XG4gIC8vIHN5c3RlbSBlbnRyb3B5LiAgU2VlICMxODlcbiAgaWYgKG5vZGUgPT0gbnVsbCB8fCBjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgdmFyIHNlZWRCeXRlcyA9IHJuZygpO1xuICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjUsIGNyZWF0ZSBhbmQgNDgtYml0IG5vZGUgaWQsICg0NyByYW5kb20gYml0cyArIG11bHRpY2FzdCBiaXQgPSAxKVxuICAgICAgbm9kZSA9IF9ub2RlSWQgPSBbXG4gICAgICAgIHNlZWRCeXRlc1swXSB8IDB4MDEsXG4gICAgICAgIHNlZWRCeXRlc1sxXSwgc2VlZEJ5dGVzWzJdLCBzZWVkQnl0ZXNbM10sIHNlZWRCeXRlc1s0XSwgc2VlZEJ5dGVzWzVdXG4gICAgICBdO1xuICAgIH1cbiAgICBpZiAoY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuMi4yLCByYW5kb21pemUgKDE0IGJpdCkgY2xvY2tzZXFcbiAgICAgIGNsb2Nrc2VxID0gX2Nsb2Nrc2VxID0gKHNlZWRCeXRlc1s2XSA8PCA4IHwgc2VlZEJ5dGVzWzddKSAmIDB4M2ZmZjtcbiAgICB9XG4gIH1cblxuICAvLyBVVUlEIHRpbWVzdGFtcHMgYXJlIDEwMCBuYW5vLXNlY29uZCB1bml0cyBzaW5jZSB0aGUgR3JlZ29yaWFuIGVwb2NoLFxuICAvLyAoMTU4Mi0xMC0xNSAwMDowMCkuICBKU051bWJlcnMgYXJlbid0IHByZWNpc2UgZW5vdWdoIGZvciB0aGlzLCBzb1xuICAvLyB0aW1lIGlzIGhhbmRsZWQgaW50ZXJuYWxseSBhcyAnbXNlY3MnIChpbnRlZ2VyIG1pbGxpc2Vjb25kcykgYW5kICduc2VjcydcbiAgLy8gKDEwMC1uYW5vc2Vjb25kcyBvZmZzZXQgZnJvbSBtc2Vjcykgc2luY2UgdW5peCBlcG9jaCwgMTk3MC0wMS0wMSAwMDowMC5cbiAgdmFyIG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gIC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcbiAgdmFyIG5zZWNzID0gb3B0aW9ucy5uc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uc2VjcyA6IF9sYXN0TlNlY3MgKyAxO1xuXG4gIC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcbiAgdmFyIGR0ID0gKG1zZWNzIC0gX2xhc3RNU2VjcykgKyAobnNlY3MgLSBfbGFzdE5TZWNzKS8xMDAwMDtcblxuICAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG4gIGlmIChkdCA8IDAgJiYgb3B0aW9ucy5jbG9ja3NlcSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY2xvY2tzZXEgPSBjbG9ja3NlcSArIDEgJiAweDNmZmY7XG4gIH1cblxuICAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG4gIGlmICgoZHQgPCAwIHx8IG1zZWNzID4gX2xhc3RNU2VjcykgJiYgb3B0aW9ucy5uc2VjcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbnNlY3MgPSAwO1xuICB9XG5cbiAgLy8gUGVyIDQuMi4xLjIgVGhyb3cgZXJyb3IgaWYgdG9vIG1hbnkgdXVpZHMgYXJlIHJlcXVlc3RlZFxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3V1aWQudjEoKTogQ2FuXFwndCBjcmVhdGUgbW9yZSB0aGFuIDEwTSB1dWlkcy9zZWMnKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTtcblxuICAvLyBQZXIgNC4xLjQgLSBDb252ZXJ0IGZyb20gdW5peCBlcG9jaCB0byBHcmVnb3JpYW4gZXBvY2hcbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7XG5cbiAgLy8gYHRpbWVfbG93YFxuICB2YXIgdGwgPSAoKG1zZWNzICYgMHhmZmZmZmZmKSAqIDEwMDAwICsgbnNlY3MpICUgMHgxMDAwMDAwMDA7XG4gIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiAxNiAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdGwgJiAweGZmO1xuXG4gIC8vIGB0aW1lX21pZGBcbiAgdmFyIHRtaCA9IChtc2VjcyAvIDB4MTAwMDAwMDAwICogMTAwMDApICYgMHhmZmZmZmZmO1xuICBiW2krK10gPSB0bWggPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bWggJiAweGZmO1xuXG4gIC8vIGB0aW1lX2hpZ2hfYW5kX3ZlcnNpb25gXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMjQgJiAweGYgfCAweDEwOyAvLyBpbmNsdWRlIHZlcnNpb25cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7XG5cbiAgLy8gYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgIChQZXIgNC4yLjIgLSBpbmNsdWRlIHZhcmlhbnQpXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDtcblxuICAvLyBgY2xvY2tfc2VxX2xvd2BcbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmO1xuXG4gIC8vIGBub2RlYFxuICBmb3IgKHZhciBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgPyBidWYgOiBieXRlc1RvVXVpZChiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2MTtcbiIsInZhciBybmcgPSByZXF1aXJlKCcuL2xpYi9ybmcnKTtcbnZhciBieXRlc1RvVXVpZCA9IHJlcXVpcmUoJy4vbGliL2J5dGVzVG9VdWlkJyk7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuXG4gIGlmICh0eXBlb2Yob3B0aW9ucykgPT0gJ3N0cmluZycpIHtcbiAgICBidWYgPSBvcHRpb25zID09PSAnYmluYXJ5JyA/IG5ldyBBcnJheSgxNikgOiBudWxsO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTtcblxuICAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG4gIHJuZHNbNl0gPSAocm5kc1s2XSAmIDB4MGYpIHwgMHg0MDtcbiAgcm5kc1s4XSA9IChybmRzWzhdICYgMHgzZikgfCAweDgwO1xuXG4gIC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuICBpZiAoYnVmKSB7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IDE2OyArK2lpKSB7XG4gICAgICBidWZbaSArIGlpXSA9IHJuZHNbaWldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYgfHwgYnl0ZXNUb1V1aWQocm5kcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdjQ7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IG1vZHVsZVsnZGVmYXVsdCddIDpcblx0XHQoKSA9PiBtb2R1bGU7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsImNvbnN0IGJlb25fcG9wb3J2ZXJfY2hlY2sgPSBgZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUIyWlhKemFXOXVQU0l4TGpFaUlHbGtQU0pEWVhCaFh6RWlJSGc5SWpCd2VDSWdlVDBpTUhCNElpQjJhV1YzUW05NFBTSXdJREFnTlRJZ05USWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lEVXlJRFV5T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSWdkMmxrZEdnOUlqVXhNaUlnYUdWcFoyaDBQU0kxTVRJaVBqeG5QanhuUGdvSlBIQmhkR2dnWkQwaVRUSTJMREJETVRFdU5qWTBMREFzTUN3eE1TNDJOak1zTUN3eU5uTXhNUzQyTmpRc01qWXNNallzTWpaek1qWXRNVEV1TmpZekxESTJMVEkyVXpRd0xqTXpOaXd3TERJMkxEQjZJRTB5Tml3MU1FTXhNaTQzTmpjc05UQXNNaXd6T1M0eU16TXNNaXd5TmlBZ0lGTXhNaTQzTmpjc01pd3lOaXd5Y3pJMExERXdMamMyTnl3eU5Dd3lORk16T1M0eU16TXNOVEFzTWpZc05UQjZJaUJrWVhSaExXOXlhV2RwYm1Gc1BTSWpNREF3TURBd0lpQmpiR0Z6Y3owaVlXTjBhWFpsTFhCaGRHZ2lJSE4wZVd4bFBTSm1hV3hzT2lOR1JrWkdSa1lpSUdSaGRHRXRiMnhrWDJOdmJHOXlQU0lqTURBd01EQXdJajQ4TDNCaGRHZytDZ2s4Y0dGMGFDQmtQU0pOTXpndU1qVXlMREUxTGpNek5td3RNVFV1TXpZNUxERTNMakk1YkMwNUxqSTFPUzAzTGpRd04yTXRNQzQwTXkwd0xqTTBOUzB4TGpBMk1TMHdMakkzTkMweExqUXdOU3d3TGpFMU5tTXRNQzR6TkRVc01DNDBNekl0TUM0eU56VXNNUzR3TmpFc01DNHhOVFlzTVM0ME1EWWdJQ0JzTVRBc09FTXlNaTQxTlRrc016UXVPVEk0TERJeUxqYzRMRE0xTERJekxETTFZekF1TWpjMkxEQXNNQzQxTlRFdE1DNHhNVFFzTUM0M05EZ3RNQzR6TXpac01UWXRNVGhqTUM0ek5qY3RNQzQwTVRJc01DNHpNeTB4TGpBME5TMHdMakE0TXkweExqUXhNU0FnSUVNek9TNHlOVEVzTVRRdU9EZzFMRE00TGpZeUxERTBMamt5TWl3ek9DNHlOVElzTVRVdU16TTJlaUlnWkdGMFlTMXZjbWxuYVc1aGJEMGlJekF3TURBd01DSWdZMnhoYzNNOUltRmpkR2wyWlMxd1lYUm9JaUJ6ZEhsc1pUMGlabWxzYkRvalJrWkdSa1pHSWlCa1lYUmhMVzlzWkY5amIyeHZjajBpSXpBd01EQXdNQ0krUEM5d1lYUm9QZ284TDJjK1BDOW5QaUE4TDNOMlp6ND1gO1xuXG5pbXBvcnQgdXVpZCBmcm9tIFwidXVpZFwiO1xuXG52YXIgVGFnUG9wdXBDb21wb25lbnQgPSBmdW5jdGlvbihyb290LCBjb25maWcpIHtcbiAgdGhpcy5yb290ID0gcm9vdDtcblxuICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICAvLyBpZiwgYWZ0ZXIgc3VibWl0aW5nLCB0aGUgcG9wdXAga2VlcHMgaXRzZWxmIG9uIHBhZ2UgYWxsb3dpbmcgdXNlciB0byBjaGFuZ2UgaGlzIG9wdGlvbnNcbiAgICAgIGFsbG93Q2hhbmdlOiB0cnVlLFxuICAgICAgLy8gaWYsIGFmdGVyIHN1Ym1pdGluZywgdGhlIGNvbnRlbnQgZm9yIGN1cnJlbnQgcGFnZSBzaG91bGQgYmUgcmVsb2FkZWQuXG4gICAgICByZWxvYWRDb250ZW50OiB0cnVlLFxuICAgICAgLy8gc3RhdGUgMDogYnV0dG9uLCBzdGF0ZSAxOiBwb3B1cFxuICAgICAgaW5pdGlhbFN0YXRlOiAwLFxuICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgdGl0bGU6IFwiRW5jb250cmUgb2ZlcnRhcyBleGNsdXNpdmFzIVwiLFxuICAgICAgICBsb2FkaW5nOiBcIkNhcnJlZ2FuZG8gb2ZlcnRhcyBwZXJzb25hbGl6YWRhc+KAplwiLFxuICAgICAgICBzdWNjZXNzOiBcIlByb250byEgQXByb3ZlaXRlIHVtYSBleHBlcmnDqm5jaWEgw7puaWNhLlwiLFxuICAgICAgICBlcnJvcjogXCJPcHMsIG7Do28gY29uc2VndWltb3MgYXR1YWxpemFyIHN1YXMgcHJlZmVyw6puY2lhcy5cIixcbiAgICAgICAgdHJpZ2dlckxhYmVsOiBcIkVuY29udHJlIG9mZXJ0YXMgZXhjbHVzaXZhc1wiLFxuICAgICAgICBpbnZhbGlkSW5wdXQ6IFwiU2VsZWNpb25lIGFzIG9ww6fDtWVzIHBhcmEgZW50ZW5kZXJtb3Mgc3VhcyBwcmVmZXLDqm5jaWFzIVwiLFxuICAgICAgICBpbnZhbGlkT3B0aW9uOiBcIk7Do28gcmVjb25oZWNjZW1vcyBlc3NhIG9ww6fDo28uXCJcbiAgICAgIH0sXG4gICAgICBvcHRpb25zOiBbXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICB0cmVlOiBcInZlaWN1bG9cIixcbiAgICAgICAgLy8gICBvcmRlcjogMSxcbiAgICAgICAgLy8gICBsYWJlbDogXCJEaWdpdGUgbyBtb2RlbG8gZG8gc2V1IHZlw61jdWxvOlwiLFxuICAgICAgICAvLyAgIG9wdGlvbnM6IFtcbiAgICAgICAgLy8gICAgIFtcInZlaWN1bG86dW5vXCIsIFwiVW5vXCJdLFxuICAgICAgICAvLyAgICAgW1widmVpY3VsbzpwYWxpb1wiLCBcIlBhbGlvXCJdLFxuICAgICAgICAvLyAgICAgW1widmVpY3Vsbzp4c2FyYVwiLCBcIlhzYXJhXCJdXG4gICAgICAgIC8vICAgXVxuICAgICAgICAvLyB9XG4gICAgICBdXG4gICAgfSxcbiAgICBjb25maWdcbiAgKTtcblxuICB0aGlzLmluaXQoKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cblRhZ1BvcHVwQ29tcG9uZW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucm9vdC5jbGFzc05hbWUgPSB0aGlzLnJvb3QuY2xhc3NOYW1lICsgXCIgaW5pdGlhbGl6ZWRcIjtcbiAgdGhpcy5yZW5kZXIoKTtcbiAgdGhpcy5pbml0aWFsU3RhdGUoKTtcbn07XG5cblRhZ1BvcHVwQ29tcG9uZW50LnByb3RvdHlwZS5pbml0aWFsU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgY29uc3QgY29udHJvbCA9IHRoaXMuZ2V0Q29udHJvbENvb2tpZSgpO1xuXG4gIGlmIChjb250cm9sID09PSBcImRvbmVcIikge1xuICAgIGlmICh0aGlzLmNvbmZpZy5hbGxvd0NoYW5nZSkge1xuICAgICAgdGhpcy5jaGFuZ2VTdGVwKDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhpZGVDb21wb25lbnQoKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLmNoYW5nZVN0YXRlKHRoaXMuY29uZmlnLmluaXRpYWxTdGF0ZSk7XG59O1xuXG5UYWdQb3B1cENvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gIC8vIGJ1aWxkIHdyYXBwZXJzXG4gIGNvbnN0IGJlb25fcG9wb3ZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGJlb25fcG9wb3Zlci5jbGFzc05hbWUgPSBcImJlb25fcG9wb3ZlclwiO1xuXG4gIGNvbnN0IHdyYXBfcG9wb3ZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHdyYXBfcG9wb3Zlci5jbGFzc05hbWUgPSBcIndyYXBfcG9wb3ZlclwiO1xuICB3cmFwX3BvcG92ZXIuaWQgPSBcImJlb25fd3JhcF9wb3BvdmVyXCI7XG5cbiAgLy8gICB0cmlnZ2VyIHN0ZXBcbiAgY29uc3Qgc3RlcDAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBzdGVwMC5jbGFzc05hbWUgPSBcImJlb25fcG9wb3Zlcl9zdGVwIGJlb25fcG9wb3Zlcl9zdGVwLS0wXCI7XG5cbiAgc3RlcDAuYXBwZW5kQ2hpbGQodGhpcy5idWlsZFRpdGxlVHJpZ2dlcigpKTtcblxuICB3cmFwX3BvcG92ZXIuYXBwZW5kQ2hpbGQoc3RlcDApO1xuXG4gIC8vICAgZm9ybSBzdGVwXG4gIGNvbnN0IHN0ZXAxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgc3RlcDEuY2xhc3NOYW1lID0gXCJiZW9uX3BvcG92ZXJfc3RlcCBiZW9uX3BvcG92ZXJfc3RlcC0tMVwiO1xuXG4gIHN0ZXAxLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRIZWFkKCkpO1xuXG4gIHRoaXMuY29uZmlnLm9wdGlvbnNcbiAgICAuc29ydCgoYSwgYikgPT4gYS5vcmRlciAtIGIub3JkZXIpXG4gICAgLmZvckVhY2gob3B0aW9uID0+IHN0ZXAxLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRPcHRpb24ob3B0aW9uKSkpO1xuXG4gIHN0ZXAxLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRGb3JtQ29udHJvbHMoKSk7XG4gIHN0ZXAxLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRQb3B1cENvbnRyb2xzKCkpO1xuXG4gIHdyYXBfcG9wb3Zlci5hcHBlbmRDaGlsZChzdGVwMSk7XG5cbiAgLy8gICBsb2FkaW5nIHN0ZXBjb25zdCBzdGVwMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNvbnN0IHN0ZXAyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgc3RlcDIuY2xhc3NOYW1lID0gXCJiZW9uX3BvcG92ZXJfc3RlcCBiZW9uX3BvcG92ZXJfc3RlcC0tMlwiO1xuXG4gIHRoaXMuYnVpbGRMb2FkaW5nRmVlZGJhY2soKS5mb3JFYWNoKGVsZW1lbnQgPT4gc3RlcDIuYXBwZW5kQ2hpbGQoZWxlbWVudCkpO1xuXG4gIHdyYXBfcG9wb3Zlci5hcHBlbmRDaGlsZChzdGVwMik7XG5cbiAgLy8gZmVlZGJhY2sgc3RlcFxuICBjb25zdCBzdGVwMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHN0ZXAzLmNsYXNzTmFtZSA9IFwiYmVvbl9wb3BvdmVyX3N0ZXAgYmVvbl9wb3BvdmVyX3N0ZXAtLTNcIjtcblxuICBzdGVwMy5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkU3VjY2Vzc0ZlZWRiYWNrKCkpO1xuICBzdGVwMy5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkRXJyb3JGZWVkYmFjaygpKTtcblxuICB3cmFwX3BvcG92ZXIuYXBwZW5kQ2hpbGQoc3RlcDMpO1xuXG4gIGJlb25fcG9wb3Zlci5hcHBlbmRDaGlsZCh3cmFwX3BvcG92ZXIpO1xuICBiZW9uX3BvcG92ZXIuYXBwZW5kQ2hpbGQodGhpcy5idWlsZEJ1bGxldFRyaWdnZXIoKSk7XG5cbiAgdGhpcy5yb290LmFwcGVuZENoaWxkKGJlb25fcG9wb3Zlcik7XG4gIHRoaXMuY2hhbmdlU3RlcCgwKTtcbn07XG5cblRhZ1BvcHVwQ29tcG9uZW50LnByb3RvdHlwZS5idWlsZFRpdGxlVHJpZ2dlciA9IGZ1bmN0aW9uKCkge1xuICBjb25zdCBkaXYwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGl2MC5pZCA9IFwiYmVvbl9wb3BvdmVyX3N0ZXBfMFwiO1xuICBkaXYwLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgZGl2MC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcbiAgZGl2MC5zdHlsZS5tYXJnaW4gPSBcImF1dG9cIjtcbiAgZGl2MC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgZGl2MC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jaGFuZ2VTdGVwKDEpKTtcblxuICBjb25zdCBwb3BvdmVyX2ljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBwb3BvdmVyX2ljb24uaWQgPSBcImJlb25fcG9wb3Zlcl9pY29uXCI7XG4gIHBvcG92ZXJfaWNvbi5jbGFzc05hbWUgPSBcInBvcG92ZXJfaWNvbiBwb3BvdmVyX2ljb24tLXVwXCI7XG5cbiAgZGl2MC5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkSGVhZCgpKTtcbiAgZGl2MC5hcHBlbmRDaGlsZChwb3BvdmVyX2ljb24pO1xuXG4gIHJldHVybiBkaXYwO1xufTtcblxuVGFnUG9wdXBDb21wb25lbnQucHJvdG90eXBlLmJ1aWxkQnVsbGV0VHJpZ2dlciA9IGZ1bmN0aW9uKCkge1xuICBjb25zdCBiZW9uX3BvcG92ZXJfYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgYmVvbl9wb3BvdmVyX2J1dHRvbi5jbGFzc05hbWUgPSBcImJ1YmJsZV9idXR0b24gYW5pbWF0ZWQgZmFkZUluXCI7XG5cbiAgYmVvbl9wb3BvdmVyX2J1dHRvbi5pbm5lckhUTUwgPVxuICAgIFwiPHNwYW4gY2xhc3M9J2J1YmJsZV9idXR0b25fX2ljb24nPjwvc3Bhbj48c3BhbiBjbGFzcz0nYnViYmxlX2J1dHRvbl9fbGFiZWwnPlwiICtcbiAgICB0aGlzLmNvbmZpZy5tZXNzYWdlcy50cmlnZ2VyTGFiZWwgK1xuICAgIFwiPC9zcGFuPlwiO1xuXG4gIGJlb25fcG9wb3Zlcl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBwb3BvdmVyID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoXCIjYmVvbl93cmFwX3BvcG92ZXJcIik7XG5cbiAgICBpZiAoXCJmbGV4XCIgPT09IHBvcG92ZXIuc3R5bGUuZGlzcGxheSkge1xuICAgICAgdGhpcy5jaGFuZ2VTdGVwKDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNoYW5nZVN0ZXAoMSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gYmVvbl9wb3BvdmVyX2J1dHRvbjtcbn07XG5cblRhZ1BvcHVwQ29tcG9uZW50LnByb3RvdHlwZS5idWlsZEhlYWQgPSBmdW5jdGlvbigpIHtcbiAgY29uc3QgdGV4dDAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgdGV4dDAuY2xhc3NOYW1lID0gXCJiZW9uX3BvcG92ZXItaGVhZFwiO1xuICB0ZXh0MC5pbm5lclRleHQgPSB0aGlzLmNvbmZpZy5tZXNzYWdlcy50aXRsZTtcblxuICByZXR1cm4gdGV4dDA7XG59O1xuXG5UYWdQb3B1cENvbXBvbmVudC5wcm90b3R5cGUuYnVpbGRPcHRpb24gPSBmdW5jdGlvbihvcHRpb24pIHtcbiAgY29uc3QgZGl2U2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGl2U2VsZWN0LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgZGl2U2VsZWN0LnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xuXG4gIGNvbnN0IHdyYXBfc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgd3JhcF9zZWxlY3QuY2xhc3NOYW1lID0gXCJ3cmFwX3NlbGVjdFwiO1xuXG4gIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBpbnB1dC5wbGFjZWhvbGRlciA9IG9wdGlvbi5sYWJlbDtcbiAgaW5wdXQuY2xhc3NOYW1lID0gXCJwb3BvdmVyX3NlbGVjdFwiO1xuICBpbnB1dC5uYW1lID0gb3B0aW9uLnRyZWU7XG4gIGlucHV0LnNldEF0dHJpYnV0ZShcImxpc3RcIiwgYCR7b3B0aW9uLnRyZWV9X2xpc3RgKTtcblxuICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFxuICAgIFwiY2hhbmdlXCIsXG4gICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcbiAgICAgIGNvbnN0IGxhYmVsID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgY29uc3QgaWQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFwibGlzdFwiKTtcbiAgICAgIGNvbnN0IHRleHRSZWdleHAgPSBuZXcgUmVnRXhwKGAke2xhYmVsfWAsIFwiaVwiKTtcblxuICAgICAgY29uc3QgZGF0YWxpc3RPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgIyR7aWR9IG9wdGlvbmApO1xuXG4gICAgICBsZXQgc2VsZWN0ZWQ7XG4gICAgICBmb3IgKGxldCBpID0gMCwgYyA9IGRhdGFsaXN0T3B0aW9ucy5sZW5ndGg7IGkgPCBjOyBpKyspIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gZGF0YWxpc3RPcHRpb25zW2ldO1xuICAgICAgICBjb25zdCBsYWJlbCA9IG9wdGlvbi52YWx1ZTtcblxuICAgICAgICBpZiAodGV4dFJlZ2V4cC50ZXN0KGxhYmVsKSkge1xuICAgICAgICAgIHNlbGVjdGVkID0gb3B0aW9uLmdldEF0dHJpYnV0ZShgZGF0YS1vcHRpb25gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShgZGF0YS1zZWxlY3RlZGAsIHNlbGVjdGVkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVwb3J0RXJyb3IodGhpcy5jb25maWcubWVzc2FnZXMuaW52YWxpZE9wdGlvbik7XG4gICAgICB9XG4gICAgfS5iaW5kKHRoaXMpXG4gICk7XG5cbiAgY29uc3QgZGF0YWxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGF0YWxpc3RcIik7XG4gIGRhdGFsaXN0LmlkID0gaW5wdXQuZ2V0QXR0cmlidXRlKFwibGlzdFwiKTtcblxuICBmb3IgKGNvbnN0IG9wdCBvZiBvcHRpb24ub3B0aW9ucykge1xuICAgIGNvbnN0IG9wdGlvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICBvcHRpb25FbC52YWx1ZSA9IG9wdFsxXTtcbiAgICBvcHRpb25FbC5zZXRBdHRyaWJ1dGUoYGRhdGEtb3B0aW9uYCwgb3B0KTtcblxuICAgIGRhdGFsaXN0LmFwcGVuZENoaWxkKG9wdGlvbkVsKTtcbiAgfVxuXG4gIHdyYXBfc2VsZWN0LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgd3JhcF9zZWxlY3QuYXBwZW5kQ2hpbGQoZGF0YWxpc3QpO1xuXG4gIHJldHVybiB3cmFwX3NlbGVjdDtcbn07XG5cblRhZ1BvcHVwQ29tcG9uZW50LnByb3RvdHlwZS5idWlsZEZvcm1Db250cm9scyA9IGZ1bmN0aW9uKCkge1xuICBjb25zdCBidXR0b25PayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGJ1dHRvbk9rLmNsYXNzTmFtZSA9IFwicG9wb3Zlcl9zZWFyY2hfYnV0dG9uXCI7XG4gIGJ1dHRvbk9rLmlubmVyVGV4dCA9IFwiT0tcIjtcbiAgYnV0dG9uT2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlU3VibWl0LmJpbmQodGhpcykpO1xuXG4gIHJldHVybiBidXR0b25Paztcbn07XG5cblRhZ1BvcHVwQ29tcG9uZW50LnByb3RvdHlwZS5idWlsZFBvcHVwQ29udHJvbHMgPSBmdW5jdGlvbigpIHtcbiAgY29uc3QgYnV0dG9uRmVjaGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgYnV0dG9uRmVjaGFyLmNsYXNzTmFtZSA9IFwicG9wb3Zlcl9jbG9zZV9idXR0b25cIjtcbiAgYnV0dG9uRmVjaGFyLmlubmVyVGV4dCA9IFwiRkVDSEFSXCI7XG4gIGJ1dHRvbkZlY2hhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jaGFuZ2VTdGVwKDApKTtcblxuICByZXR1cm4gYnV0dG9uRmVjaGFyO1xufTtcblxuVGFnUG9wdXBDb21wb25lbnQucHJvdG90eXBlLmJ1aWxkTG9hZGluZ0ZlZWRiYWNrID0gZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGxvYWRpbmdHaWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBsb2FkaW5nR2lmLmNsYXNzTmFtZSA9IFwibGRzLXJvbGxlclwiO1xuICBsb2FkaW5nR2lmLmlubmVySFRNTCA9XG4gICAgXCI8ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+XCI7XG5cbiAgY29uc3QgdGV4dExvYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgdGV4dExvYWRpbmcuY2xhc3NOYW1lID0gXCJhbmltYXRlZCBmYWRlSW5cIjtcbiAgdGV4dExvYWRpbmcuc3R5bGUubWFyZ2luID0gXCIwcHggYXV0byAyMHB4IGF1dG9cIjtcbiAgdGV4dExvYWRpbmcuaW5uZXJUZXh0ID0gdGhpcy5jb25maWcubWVzc2FnZXMubG9hZGluZztcblxuICByZXR1cm4gW2xvYWRpbmdHaWYsIHRleHRMb2FkaW5nXTtcbn07XG5cblRhZ1BvcHVwQ29tcG9uZW50LnByb3RvdHlwZS5idWlsZFN1Y2Nlc3NGZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xuICBjb25zdCBmZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGZlZWRiYWNrLmNsYXNzTmFtZSA9IFwib24tLXN1Y2Nlc3NcIjtcblxuICBjb25zdCBpbWFnZUNoZWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgaW1hZ2VDaGVjay5jbGFzc05hbWUgPSBcImFuaW1hdGVkIHRhZGFcIjtcbiAgaW1hZ2VDaGVjay5zdHlsZS5oZWlnaHQgPSBcIjY0cHhcIjtcbiAgaW1hZ2VDaGVjay5zdHlsZS5tYXJnaW4gPSBcIjIwcHggYXV0b1wiO1xuICBpbWFnZUNoZWNrLnNyYyA9IGJlb25fcG9wb3J2ZXJfY2hlY2s7XG5cbiAgY29uc3QgdGV4dFByb250byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICB0ZXh0UHJvbnRvLmNsYXNzTmFtZSA9IFwiYW5pbWF0ZWQgZmFkZUluXCI7XG4gIHRleHRQcm9udG8uc3R5bGUubWFyZ2luID0gXCIgMHB4IGF1dG8gMjBweCBhdXRvXCI7XG4gIHRleHRQcm9udG8uaW5uZXJUZXh0ID0gdGhpcy5jb25maWcubWVzc2FnZXMuc3VjY2VzcztcblxuICBmZWVkYmFjay5hcHBlbmRDaGlsZChpbWFnZUNoZWNrKTtcbiAgZmVlZGJhY2suYXBwZW5kQ2hpbGQodGV4dFByb250byk7XG5cbiAgcmV0dXJuIGZlZWRiYWNrO1xufTtcblxuVGFnUG9wdXBDb21wb25lbnQucHJvdG90eXBlLmJ1aWxkRXJyb3JGZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xuICBjb25zdCBmZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGZlZWRiYWNrLmNsYXNzTmFtZSA9IFwib24tLWVycm9yXCI7XG5cbiAgY29uc3QgaW1hZ2VDaGVjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIGltYWdlQ2hlY2suY2xhc3NOYW1lID0gXCJhbmltYXRlZCB0YWRhXCI7XG4gIGltYWdlQ2hlY2suc3R5bGUuaGVpZ2h0ID0gXCI2NHB4XCI7XG4gIGltYWdlQ2hlY2suc3R5bGUubWFyZ2luID0gXCIyMHB4IGF1dG9cIjtcbiAgaW1hZ2VDaGVjay5zcmMgPSBiZW9uX3BvcG9ydmVyX2NoZWNrO1xuXG4gIGNvbnN0IHRleHRQcm9udG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgdGV4dFByb250by5jbGFzc05hbWUgPSBcImFuaW1hdGVkIGZhZGVJblwiO1xuICB0ZXh0UHJvbnRvLnN0eWxlLm1hcmdpbiA9IFwiIDBweCBhdXRvIDIwcHggYXV0b1wiO1xuICB0ZXh0UHJvbnRvLmlubmVyVGV4dCA9IHRoaXMuY29uZmlnLm1lc3NhZ2VzLmVycm9yO1xuXG4gIGZlZWRiYWNrLmFwcGVuZENoaWxkKGltYWdlQ2hlY2spO1xuICBmZWVkYmFjay5hcHBlbmRDaGlsZCh0ZXh0UHJvbnRvKTtcblxuICByZXR1cm4gZmVlZGJhY2s7XG59O1xuXG5UYWdQb3B1cENvbXBvbmVudC5wcm90b3R5cGUuY2hhbmdlU3RlcCA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgY29uc3QgcG9wb3ZlciA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKFwiI2Jlb25fd3JhcF9wb3BvdmVyXCIpO1xuXG4gIGlmIChzdGVwID09PSAwKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG5cbiAgaWYgKHN0ZXAgPT09IDMpIHtcbiAgICBwb3BvdmVyLmNsYXNzTmFtZSA9IFwid3JhcF9wb3BvdmVyIGFuaW1hdGVkIHNsaWRlT3V0RG93blwiO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKFwiI2Jlb25fd3JhcF9wb3BvdmVyXCIpLmNsYXNzTmFtZSA9IFwid3JhcF9wb3BvdmVyXCI7XG4gIH1cblxuICB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcihcIi5iZW9uX3BvcG92ZXJfc3RlcC0tMFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKFwiLmJlb25fcG9wb3Zlcl9zdGVwLS0xXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoXCIuYmVvbl9wb3BvdmVyX3N0ZXAtLTJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcihcIi5iZW9uX3BvcG92ZXJfc3RlcC0tM1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKGAuYmVvbl9wb3BvdmVyX3N0ZXAtLSR7c3RlcH1gKS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cbiAgcG9wb3Zlci5jbGFzc05hbWUgPSBwb3BvdmVyLmNsYXNzTmFtZS5yZXBsYWNlKC8oc3RlcC0tWzAtOV0pL2ksIFwiXCIpO1xuICBwb3BvdmVyLmNsYXNzTmFtZSA9IHBvcG92ZXIuY2xhc3NOYW1lICsgXCIgc3RlcC0tXCIgKyBzdGVwO1xufTtcblxuVGFnUG9wdXBDb21wb25lbnQucHJvdG90eXBlLmhpZGVDb21wb25lbnQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5yb290LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn07XG5cblRhZ1BvcHVwQ29tcG9uZW50LnByb3RvdHlwZS5jaGFuZ2VTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gIGxldCBjbGFzc05hbWUgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcihcIiNiZW9uX3dyYXBfcG9wb3ZlclwiKS5jbGFzc05hbWU7XG4gIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5yZXBsYWNlKC8oc3RhdGUtLS4rPykvaSwgXCJcIik7XG5cbiAgaWYgKHN0YXRlKSBjbGFzc05hbWUgKz0gYCBzdGF0ZS0tJHtzdGF0ZX1gO1xuXG4gIHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKFwiI2Jlb25fd3JhcF9wb3BvdmVyXCIpLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbn07XG5cblRhZ1BvcHVwQ29tcG9uZW50LnByb3RvdHlwZS5oYW5kbGVTdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgbGV0IHZhbHVlcyA9IFtdO1xuXG4gIHRoaXMucm9vdFxuICAgIC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbbGlzdF1cIilcbiAgICAuZm9yRWFjaChzZWxlY3QgPT5cbiAgICAgIHZhbHVlcy5wdXNoKHNlbGVjdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNlbGVjdGVkXCIpLnNwbGl0KFwiLFwiKVswXSlcbiAgICApO1xuXG4gIHZhbHVlcyA9IHZhbHVlcy5maWx0ZXIodmFsdWUgPT4gdmFsdWUubGVuZ3RoKTtcblxuICBpZiAoIXZhbHVlcy5sZW5ndGgpIHtcbiAgICB0aGlzLnJlcG9ydEVycm9yKHRoaXMuY29uZmlnLm1lc3NhZ2VzLmludmFsaWRJbnB1dCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5jaGFuZ2VTdGVwKDIpO1xuXG4gIC8vIGdldCBwYXJzZXIgaW5mb1xuICBsZXQgY3VycmVudFBhZ2UgPSBcImhvbWVwYWdlXCI7XG4gIGxldCBwYXJzZWQgPSB7fTtcblxuICBpZiAod2luZG93LmJlb25fY3VzdG9tKSB7XG4gICAgY3VycmVudFBhZ2UgPSB3aW5kb3cuYmVvbl9jdXN0b20uY3VycmVudFBhZ2UoKTtcbiAgICBwYXJzZWQgPSB3aW5kb3cuYmVvbl9jdXN0b20ucGFyc2VyLnBhcnNlKGN1cnJlbnRQYWdlKTtcbiAgfVxuXG4gIGNvbnN0IGFja0V2ZW50ID0ge1xuICAgIGV2ZW50X2lkOiB1dWlkLnY0KCksXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIHR5cGU6IFwiYWNrXCIsXG4gICAgcGF5bG9hZDogT2JqZWN0LmFzc2lnbihcbiAgICAgIHtcbiAgICAgICAgcGF5bG9hZFR5cGU6IFwidXNlcl90YWdzXCIsXG4gICAgICAgIHBhZ2VUeXBlOiBjdXJyZW50UGFnZSxcbiAgICAgICAgdGFnczogW11cbiAgICAgIH0sXG4gICAgICBwYXJzZWRcbiAgICApXG4gIH07XG5cbiAgdmFsdWVzLmZvckVhY2godmFsdWUgPT5cbiAgICBhY2tFdmVudC5wYXlsb2FkLnRhZ3MucHVzaCh7IHR5cGU6IFwidHJlZVwiLCBsYWJlbDogdmFsdWUgfSlcbiAgKTtcblxuICBpZiAod2luZG93LmJlb24pIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJiZW9uLmVuZ2luZS5zZW5kLnJlc3BvbnNlXCIsXG4gICAgICBmdW5jdGlvbihldmVudCkge1xuICAgICAgICB2YXIgd2hhdCA9IGV2ZW50LmRldGFpbC53aGF0O1xuICAgICAgICB2YXIgcGF5bG9hZCA9IGV2ZW50LmRldGFpbC5wYXlsb2FkO1xuXG4gICAgICAgIC8vIHJ1biBhZnRlciBwYWdldmlldyBldmVudFxuICAgICAgICBpZiAod2hhdCA9PT0gXCJldmVudFwiICYmIHBheWxvYWQuZXZlbnRfaWQgPT09IGFja0V2ZW50LmV2ZW50X2lkKVxuICAgICAgICAgIHRoaXMuaGFuZGxlUmVzcG9uc2UoZXZlbnQpO1xuICAgICAgfS5iaW5kKHRoaXMpXG4gICAgKTtcblxuICAgIGJlb24oXCJzZW5kXCIsIFwiZXZlbnRcIiwgYWNrRXZlbnQpO1xuICB9IGVsc2Uge1xuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oYW5kbGVSZXNwb25zZSh0cnVlKSwgMjAwMCk7XG4gIH1cbn07XG5cblRhZ1BvcHVwQ29tcG9uZW50LnByb3RvdHlwZS5oYW5kbGVSZXNwb25zZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gIHRoaXMuY2hhbmdlU3RlcCgzKTtcblxuICBpZiAoZXZlbnQpIHRoaXMuY2hhbmdlU3RhdGUoXCJzdWNjZXNzXCIpO1xuICBlbHNlIHRoaXMuY2hhbmdlU3RhdGUoXCJlcnJvclwiKTtcblxuICB0aGlzLnNldENvbnRyb2xDb29raWUoKTtcblxuICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLmNoYW5nZVN0ZXAoMCksIDYwMDApO1xufTtcblxuVGFnUG9wdXBDb21wb25lbnQucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gIC8vIHJlc2V0IHNlbGVjdHNcbiAgdGhpcy5yb290XG4gICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFtsaXN0XVwiKVxuICAgIC5mb3JFYWNoKHNlbGVjdCA9PiAoc2VsZWN0LnZhbHVlID0gXCJcIikpO1xuXG4gIC8vICAgcmVzZXQgd3JhcHBlciBjbGFzc2VzXG4gIHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKFwiI2Jlb25fd3JhcF9wb3BvdmVyXCIpLmNsYXNzTmFtZSA9IFwid3JhcF9wb3BvdmVyXCI7XG4gIHRoaXMuY2hhbmdlU3RhdGUobnVsbCk7XG59O1xuXG5UYWdQb3B1cENvbXBvbmVudC5wcm90b3R5cGUucmVwb3J0RXJyb3IgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gIGNvbnN0IGJ1dHRvbiA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKFwiLnBvcG92ZXJfc2VhcmNoX2J1dHRvblwiKTtcbiAgYnV0dG9uLmlubmVyVGV4dCA9IG1lc3NhZ2U7XG5cbiAgYnV0dG9uLmNsYXNzTmFtZSA9IGJ1dHRvbi5jbGFzc05hbWUgKyBcIiBoYXMtZXJyb3JcIjtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgYnV0dG9uLmlubmVyVGV4dCA9IFwiT0tcIjtcbiAgICBidXR0b24uY2xhc3NOYW1lID0gYnV0dG9uLmNsYXNzTmFtZS5yZXBsYWNlKFwiIGhhcy1lcnJvclwiLCBcIlwiKTtcbiAgfSwgMzAwMCk7XG59O1xuXG5UYWdQb3B1cENvbXBvbmVudC5wcm90b3R5cGUuc2V0Q29udHJvbENvb2tpZSA9IGZ1bmN0aW9uKCkge1xuICBjb25zdCBjb29raWVOYW1lID0gYGJlb24tY29udHJvbC0ke3RoaXMuY29uZmlnLmlkfWA7XG5cbiAgdmFyIGNvb2tpZSA9IFwiXCIsXG4gICAgZXhwaXJlcyA9IFwiXCIsXG4gICAgcGF0aCA9IFwiL1wiLFxuICAgIGRvbWFpbiA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSxcbiAgICB2YWx1ZSA9IFwiZG9uZVwiO1xuXG4gIGNvb2tpZSA9XG4gICAgY29va2llTmFtZSArXG4gICAgXCI9XCIgK1xuICAgIHZhbHVlICtcbiAgICBleHBpcmVzICtcbiAgICBcIjsgZG9tYWluPVwiICtcbiAgICBkb21haW4gK1xuICAgIFwiOyBwYXRoPVwiICtcbiAgICBwYXRoO1xuXG4gIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZTtcblxuICByZXR1cm4gdmFsdWU7XG59O1xuXG5UYWdQb3B1cENvbXBvbmVudC5wcm90b3R5cGUuZ2V0Q29udHJvbENvb2tpZSA9IGZ1bmN0aW9uKCkge1xuICBjb25zdCBjb29raWVOYW1lID0gYGJlb24tY29udHJvbC0ke3RoaXMuY29uZmlnLmlkfWA7XG5cbiAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7XCIpO1xuICB2YXIgdmFsdWUgPSBudWxsO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29va2llcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjb29raWUgPSBjb29raWVzW2ldO1xuXG4gICAgd2hpbGUgKGNvb2tpZS5jaGFyQXQoMCkgPT0gXCIgXCIpIGNvb2tpZSA9IGNvb2tpZS5zdWJzdHJpbmcoMSwgY29va2llLmxlbmd0aCk7XG5cbiAgICBpZiAoY29va2llLmluZGV4T2YoY29va2llTmFtZSkgPT09IDApIHtcbiAgICAgIHZhbHVlID0gY29va2llLnN1YnN0cmluZyhjb29raWVOYW1lLmxlbmd0aCArIDEsIGNvb2tpZS5sZW5ndGgpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVGFnUG9wdXBDb21wb25lbnQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gdmFyIHNsaWRlciA9IHJlcXVpcmUoXCIuL3NsaWRlclwiKTtcbmltcG9ydCBUYWdQb3B1cENvbXBvbmVudCBmcm9tIFwiLi9wb3B1cFwiO1xuXG52YXIgVGFnUG9wdXBJbml0aWFsaXplciA9IGZ1bmN0aW9uKCkge1xuICAvLyBpbml0aWFsaXplIHNsaWRlcnMgYWxyZWFkeSBvbiBwYWdlXG4gIHRoaXMuaW5pdFBvcHVwcygpO1xuXG4gIC8vIGJpbmQgZXZlbnRzIHRvIGluaXRpYWxpemUgc2xpZGVycyByZWFsIHRpbWVcbiAgdGhpcy5iaW5kRXZlbnRzKCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUYWdQb3B1cEluaXRpYWxpemVyO1xuXG5UYWdQb3B1cEluaXRpYWxpemVyLnByb3RvdHlwZS5iaW5kRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIHRoaXMuaW5pdFBvcHVwcy5iaW5kKHRoaXMpKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICBcImJlb24uYnVkZHkuZWxlbWVudHMuaGFuZGxlLml0ZW0uaW5qZWN0LnN1Y2Nlc3NcIixcbiAgICB0aGlzLmluaXRQb3B1cEZyb21JbmplY3Rpb24uYmluZCh0aGlzKVxuICApO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgIFwiYmVvbi5idWRkeS5pbmplY3QuYWZ0ZXJcIixcbiAgICB0aGlzLmluaXRQb3B1cEZyb21JbmplY3Rpb24uYmluZCh0aGlzKVxuICApO1xufTtcblxuVGFnUG9wdXBJbml0aWFsaXplci5wcm90b3R5cGUuaW5pdFBvcHVwcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5iZW9uLXRhZ3BvcHVwOm5vdCguaW5pdGlhbGl6ZWQpXCIpO1xuXG4gIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHBvcHVwcykuZm9yRWFjaChcbiAgICBmdW5jdGlvbihyb290LCBpbmRleCkge1xuICAgICAgdGhpcy5pbml0UG9wdXAocm9vdCk7XG4gICAgfS5iaW5kKHRoaXMpXG4gICk7XG59O1xuXG5UYWdQb3B1cEluaXRpYWxpemVyLnByb3RvdHlwZS5pbml0UG9wdXBGcm9tSW5qZWN0aW9uID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgdmFyIGNvbnRhaW5lciA9IGV2ZW50LmRldGFpbC5jb250YWluZXI7XG4gIHZhciByb290ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuYmVvbi10YWdwb3B1cDpub3QoLmluaXRpYWxpemVkKVwiKTtcblxuICBpZiAocm9vdCkge1xuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImxvYWRpbmdcIikge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJET01Db250ZW50TG9hZGVkXCIsXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHRoaXMuaW5pdFBvcHVwKHJvb3QpO1xuICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW5pdFBvcHVwKHJvb3QpO1xuICAgIH1cbiAgfVxufTtcblxuVGFnUG9wdXBJbml0aWFsaXplci5wcm90b3R5cGUuaW5pdFBvcHVwID0gZnVuY3Rpb24ocm9vdCkge1xuICB0cnkge1xuICAgIHZhciByYXdDb25maWcgPSByb290LmdldEF0dHJpYnV0ZShcImRhdGEtY29uZmlnXCIpO1xuICAgIHZhciBjb25maWcgPSBKU09OLnBhcnNlKHJhd0NvbmZpZyk7XG5cbiAgICBuZXcgVGFnUG9wdXBDb21wb25lbnQocm9vdCwgY29uZmlnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKFwiZmFpbGVkIHRvIGJ1aWxkIHRhZ3BvcHVwXCIsIGUpO1xuICB9XG59O1xuXG4oZnVuY3Rpb24oKSB7XG4gIGlmICh3aW5kb3cpIHdpbmRvdy5CZW9uVGFnUG9wdXBJbml0aWFsaXplciA9IFRhZ1BvcHVwSW5pdGlhbGl6ZXI7XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==